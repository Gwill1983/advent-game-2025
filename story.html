<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Advent Game – Story</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Golden Star Background -->
  <div class="stars-container"></div>

  <!-- Navigation Bar -->
  <header class="navbar">
    <div class="logo">The Advent Game</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="grid.html">Case File</a></li>
        <li><a href="story.html" class="active">Story</a></li>
        <li><a href="help.html">Help</a></li>
      </ul>
    </nav>
  </header>

  <main class="page-content">
    <h1>The Story So Far</h1>
    <p class="intro-text">It began with a single email — sent on a frosty North Pole morning...</p>

    <!-- Inbox Preview -->
    <div class="inbox">
      <div class="email-preview">
        <div class="email-header">
          <span class="from">anon@northpolemail.com</span>
          <span class="subject">URGENT: Christmas Quality Issue</span>
        </div>
        <button class="open-email-btn">Open Email</button>
      </div>
    </div>

    <!-- Email Overlay -->
    <div id="emailOverlay">
      <div class="email-box">
        <div class="email-header-full">
          <p><strong>From:</strong> anon@northpolemail.com</p>
          <p><strong>To:</strong> santa@northpolehq.com</p>
          <p><strong>Subject:</strong> URGENT: Christmas Quality Issue</p>
        </div>
        <div class="email-body">
          <p>Dear Santa,</p>
          <p>
            I must raise serious concerns about the gifts delivered this season.
            The craftsmanship seems... off. The toys don’t sparkle, the magic feels dull,
            and several children have started asking questions.
          </p>
          <p>
            Someone inside the Workshop is sabotaging Christmas.  
            Find out who — before it’s too late.
          </p>
          <p>Sincerely,<br><em>Anon</em></p>
        </div>
        <button id="closeEmailBtn" class="cta small">Close Email</button>
      </div>
    </div>
  </main>

  <footer>© 2025 The Advent Game — All Rights Reserved</footer>

  <!-- Stars + Email Script -->
  <script>
    // ---- Starfield (same as homepage) ----
    const starsContainer = document.querySelector('.stars-container');
    const starCount = 60;
    const stars = [];

    for (let i = 0; i < starCount; i++) {
      const star = document.createElement('div');
      star.classList.add('star');
      const size = Math.random() * 4 + 2;
      star.style.width = `${size}px`;
      star.style.height = `${size}px`;
      star.style.left = `${Math.random() * 100}%`;
      star.style.top = `${Math.random() * 100}%`;
      star.style.animationDelay = `${Math.random() * 6}s`;
      starsContainer.appendChild(star);
      stars.push({
        el: star,
        x: parseFloat(star.style.left),
        y: parseFloat(star.style.top),
        dx: (Math.random() - 0.5) * 0.02,
        dy: (Math.random() - 0.5) * 0.02,
      });
    }

    function animateStars() {
      stars.forEach(s => {
        s.x += s.dx;
        s.y += s.dy;
        if (s.x < 0) s.x = 100;
        if (s.x > 100) s.x = 0;
        if (s.y < 0) s.y = 100;
        if (s.y > 100) s.y = 0;
        s.el.style.left = `${s.x}%`;
        s.el.style.top = `${s.y}%`;
      });
      requestAnimationFrame(animateStars);
    }
    animateStars();

    // ---- Email Interactions ----
    const openBtn = document.getElementById("openEmailBtn");
    const closeBtn = document.getElementById("closeEmailBtn");
    const overlay = document.getElementById("emailOverlay");

    openBtn.addEventListener("click", () => {
      overlay.classList.add("visible");
    });

    closeBtn.addEventListener("click", () => {
      overlay.classList.remove("visible");
    });
  </script>
  <!-- Email Modal -->
<div id="email-overlay" class="hidden">
  <div id="email-modal">
    <div class="email-header">
      <span class="email-subject">URGENT: Christmas Quality Issue</span>
      <button id="close-email" class="close-btn">&times;</button>
    </div>
    <div class="email-meta">
      <p><strong>From:</strong> <span>anon@northpolemail.com</span></p>
      <p><strong>To:</strong> <span>santa@northpolehq.com</span></p>
      <p><strong>Date:</strong> Frosty Morning, Dec 1</p>
    </div>
    <div class="email-body">
      <p>Dear Santa,</p>
      <p>
        I must raise serious concerns about the gifts delivered this season. The craftsmanship seems… off.  
        The toys don’t sparkle, the magic feels dull, and several children have started asking questions.  
        Someone inside the Workshop is sabotaging Christmas. Find out who — before it’s too late.
      </p>
      <p>Sincerely,<br><em>Anon</em></p>
    </div>
  </div>
</div>

<script>
  // Email modal script
  const openEmail = document.querySelector('.open-email-btn');
  const closeEmail = document.getElementById('close-email');
  const overlay = document.getElementById('email-overlay');

  openEmail.addEventListener('click', () => {
    overlay.classList.remove('hidden');
    setTimeout(() => overlay.classList.add('visible'), 10);
  });

  closeEmail.addEventListener('click', () => {
    overlay.classList.remove('visible');
    setTimeout(() => overlay.classList.add('hidden'), 300);
  });

  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.classList.remove('visible');
      setTimeout(() => overlay.classList.add('hidden'), 300);
    }
  });
</script>

</body>
</html>
